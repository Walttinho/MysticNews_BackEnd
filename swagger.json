{
  "openapi": "3.1.0",
  "info": {
    "title": "Mystic BreakNews API Documentation",
    "description": "Welcome to the Mystic BreakNews API Documentation! Here, you will find comprehensive information about the API's endpoints and how to utilize them. Explore the available routes and test their functionality. Don't forget to register and complete the authorization process to unlock the full potential of the API.",
    "contact": {
      "email": "walter.netto@live.com"
    },
    "version": "1.0.0"
  },
  "server": [
    {
      "url": "http://localhost:3000",
      "description": "Local Server"
    }
  ],
  "paths": {
    "/user/create": {
      "post": {
        "summary": "Create a new user",
        "description": "Route responsible for creating a new user",
        "tags": ["Users"],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/User"
              },
              "examples": {
                "Users": {
                  "value": {
                    "name": "Walter Netto",
                    "username": "wnetto",
                    "email": "wnetto@gmail.com",
                    "password": "1234567",
                    "avatar": "https://i.imgur.com/Ry1cb5M.png",
                    "background": "https://images.wallpapersden.com/image/download/triangle-8k-blue-pattern_bGZlbmiUmZqaraWkpJRmbmdlrWZlbWU.jpg"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "400": {
            "description": "Error Creating User"
          },
          "201": {
            "description": "User created Successfully",
            "content": {
              "application/json": {
                "schemma": {
                  "type": "object",
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          }
        }
      }
    },
    "/user/": {
      "get": {
        "summary": "Search all users",
        "description": "Route responsible for fetching all users",
        "tags": ["Users"],
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "401": {
            "description": "Unauthorized"
          },
          "400": {
            "description": "Error finding users"
          },
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/User"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/user/{id}/": {
      "get": {
        "summary": "Search user by id",
        "description": "Route responsible for searching for user by id",
        "tags": ["Users"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "type": "string",
            "description": "User ID",
            "required": true
          }
        ],
        "responses": {
          "401": {
            "description": "Unauthorized"
          },
          "400": {
            "description": "Not Found"
          },
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          }
        }
      }
    },
    "/user/{id}": {
      "patch": {
        "summary": "Update user by id",
        "description": "Route responsible for editing the user by id",
        "tags": ["Users"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "type": "string",
            "description": "User ID",
            "required": true
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/User"
              },
              "examples": {
                "Users": {
                  "value": {
                    "name": "Walter Fernandes"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "401": {
            "description": "Unauthorized"
          },
          "400": {
            "description": "Not Found"
          },
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "summary": "Login to Breaking News",
        "description": "Route responsible for logging in a registered user",
        "tags": ["Auth"],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/User"
              },
              "examples": {
                "User": {
                  "value": {
                    "email": "wnetto@gmail.com",
                    "password": "1234567"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "400": {
            "description": "Login Error"
          },
          "200": {
            "description": "Login Successfully"
          }
        }
      }
    },
    "/auth/logout": {
      "post": {
        "summary": "Logout to Breaking News",
        "description": "Route responsible for loggout in a registered user",
        "tags": ["Auth"],
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "400": {
            "description": "Logout error"
          },
          "200": {
            "description": "Logout Successfully"
          }
        }
      }
    },
    "/news/create": {
      "post": {
        "summary": "Create a new news",
        "description": "Route responsible for creating a new News",
        "tags": ["News"],
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/News"
              },
              "examples": {
                "News": {
                  "value": {
                    "user": "",
                    "banner": "https://labs.tadigital.com/wp-content/uploads/2017/07/ES6-banner.jpg",
                    "title": "ECMAScript 6",
                    "text": "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.",
                    "likes": [],
                    "comments": []
                  }
                }
              }
            }
          }
        },
        "responses": {
          "401": {
            "description": "Unauthorized"
          },
          "400": {
            "description": "Error creating news"
          },
          "201": {
            "description": "News created successfully",
            "content": {
              "application/json": {
                "schemma": {
                  "type": "object",
                  "$ref": "#/components/schemas/News"
                }
              }
            }
          }
        }
      }
    },
    "/news": {
      "get": {
        "summary": "Search all posts",
        "description": "Route responsible for fetching all posts",
        "tags": ["News"],
        "parameters": [
          {
            "in": "query",
            "name": "limit",
            "type": "string"
          },
          {
            "in": "query",
            "name": "offset",
            "type": "string"
          }
        ],
        "responses": {
          "400": {
            "description": "Error finding news"
          },
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/News"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/news/top": {
      "get": {
        "summary": "Search top News",
        "description": "Route responsible for fetching top News",
        "tags": ["News"],
        "responses": {
          "400": {
            "description": "Error finding top news"
          },
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schemma": {
                  "type": "object",
                  "$ref": "#/components/schemas/News"
                }
              }
            }
          }
        }
      }
    },
    "/news/search": {
      "get": {
        "summary": "Search News by title",
        "description": "Route responsible for fetching the News that match the title sent via query params",
        "tags": ["News"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "in": "query",
            "name": "title",
            "type": "string",
            "required": true
          }
        ],
        "responses": {
          "400": {
            "description": "No news found with the given title"
          },
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/News"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/news/byUser": {
      "get": {
        "summary": "Search news by use id",
        "description": "Route responsible for fetching news by use id",
        "tags": ["News"],
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "400": {
            "description": "Error searching news by user"
          },
          "401": {
            "description": "Unauthorized"
          },
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/News"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/news/{id}/": {
      "get": {
        "summary": "Search News by id",
        "description": "Route responsible for fetching News by id",
        "tags": ["News"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "type": "string",
            "description": "News ID",
            "required": true
          }
        ],
        "responses": {
          "401": {
            "description": "Unauthorized"
          },
          "400": {
            "description": "Error finding news"
          },
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schemma": {
                  "type": "object",
                  "$ref": "#/components/schemas/News"
                }
              }
            }
          }
        }
      }
    },
    "/news/{id}": {
      "patch": {
        "summary": "Update a News",
        "description": "Route responsible for updating a News",
        "tags": ["News"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "type": "string",
            "description": "Post ID",
            "required": true
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/News"
              },
              "examples": {
                "Post": {
                  "value": {
                    "banner": "Edit",
                    "title": "Edit",
                    "text": "Edit"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "401": {
            "description": "Unauthorized"
          },
          "400": {
            "description": "Error updating news"
          },
          "200": {
            "description": "News successfully updated",
            "content": {
              "application/json": {
                "schemma": {
                  "type": "object",
                  "$ref": "#/components/schemas/News"
                }
              }
            }
          }
        }
      }
    },
    "/news/{id}/": {
      "delete": {
        "summary": "Delete a News",
        "description": "Route responsible for deleting a News",
        "tags": ["News"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "type": "string",
            "description": "News ID",
            "required": true
          }
        ],
        "responses": {
          "401": {
            "description": "Unauthorized"
          },
          "400": {
            "description": "Error deleting news"
          },
          "200": {
            "description": "News successfully deleted"
          }
        }
      }
    },
    "/news/like/{id}/": {
      "patch": {
        "summary": "Like a News",
        "description": "Route responsible for liking a News",
        "tags": ["News"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "type": "string",
            "description": "User ID",
            "required": true
          }
        ],
        "responses": {
          "401": {
            "description": "Unauthorized"
          },
          "400": {
            "description": "Error liking news"
          },
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/news/comment/{id}/": {
      "patch": {
        "summary": "Comment on a News",
        "description": "Route responsible for commenting on a News",
        "tags": ["News"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "type": "string",
            "description": "News ID",
            "required": true
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Comment"
              },
              "examples": {
                "Comment": {
                  "value": {
                    "message": "Coment√°rio legal"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "401": {
            "description": "Unauthorized"
          },
          "400": {
            "description": "Error adding comment"
          },
          "200": {
            "description": "Comment added successfully"
          }
        }
      }
    },
    "/news/comment/{idNews}/{idComment}": {
      "patch": {
        "summary": "Comment on a News",
        "description": "Route responsible for deleting comment on a News",
        "tags": ["News"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "in": "path",
            "name": "idNews",
            "type": "string",
            "description": "News ID",
            "required": true
          },
          {
            "in": "path",
            "name": "idComment",
            "type": "string",
            "description": "Comment ID",
            "required": true
          }
        ],
        "responses": {
          "401": {
            "description": "Unauthorized"
          },
          "400": {
            "description": "Not Found"
          },
          "200": {
            "description": "Comment deleted successfully"
          }
        }
      }
    }
  },

  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    },
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "username": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "password": {
            "type": "string"
          },
          "avatar": {
            "type": "string"
          },
          "background": {
            "type": "string"
          }
        }
      },
      "News": {
        "type": "object",
        "properties": {
          "user": {
            "type": "string"
          },
          "banner": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "text": {
            "type": "string"
          },
          "likes": {
            "type": "number"
          },
          "comments": {
            "type": "array"
          },
          "createdAt": {
            "type": "date"
          }
        }
      },
      "Comment": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string"
          }
        }
      }
    }
  }
}
